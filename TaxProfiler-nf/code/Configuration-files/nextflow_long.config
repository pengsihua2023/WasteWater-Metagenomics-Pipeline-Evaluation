// nextflow_long.config - Long-read data configuration
params {
    // Input and output
    input               = 'samplesheet_long.csv'
    outdir              = 'results_viral_long'

    // Database configuration
    databases           = 'databases.csv'

    // Tool execution settings
    run_kraken2         = true
    run_bracken         = false  // ⚠️ Bracken not recommended for long-read data
                                 // Bracken is designed for short reads (50-300bp)
                                 // Long-read Kraken2 classification is already accurate enough
    
    // Kraken2 output settings (important!)
    kraken2_save_reads           = false  // Don't save classified reads (save space)
    kraken2_save_minimizers      = false  // Don't save minimizers
    
    // Note: For long-read data
    // - Kraken2 classification accuracy is high (long reads contain more information)
    // - No need for Bracken statistical correction
    // - Use Kraken2 report directly for abundance
    
    save_analysis_ready_fastqs = true  // Save preprocessed reads
    
    // Profiling and standardized output
    run_profile_standardisation = true
    standardisation_motus_generatebiom = true  // Generate BIOM format
    
    // Save intermediate outputs for abundance calculation
    save_preprocessed_reads = true
    
    // Long-read QC and preprocessing
    perform_shortread_qc                = false
    perform_longread_qc                 = true
    perform_shortread_complexityfilter  = false
    perform_shortread_hostremoval       = false
    perform_longread_hostremoval        = false
    perform_runmerging                  = true
    
    // Long-read specific parameters
    longread_qc_skipqualityfilter       = false
    
    // Resource limits
    max_cpus            = 32
    max_memory          = '256.GB'
    max_time            = '72.h'
}

profiles {
    apptainer {
        apptainer.enabled    = true
        apptainer.autoMounts = true
        apptainer.cacheDir   = "$HOME/.apptainer_cache"
        // Exclude non-existent /lscratch mount point to prevent container creation failure
        apptainer.runOptions = '--no-mount /lscratch'
    }
}
